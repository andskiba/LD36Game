<h1>
    TRIBE
</h1>
<div id="resources">
    <table class="table table-condensed table-bordered">
        <tr ng-class="vm.resources['children'].balance()>0?'success':'info'">
            <td>{{vm.resources['children'].name}}:</td>
            <td>
                <div class="progress-bar  progress-bar-striped " role="progressbar"
                     aria-valuenow="{{vm.resources['children'].quantity}}"
                     aria-valuemin="0" aria-valuemax="1" style="width:{{vm.resources['children'].quantity*100}}%"
                     ng-class="vm.resources['children'].balance() > 0 ? 'progress-bar-success active ' : '' ">
                    {{vm.resources['children'].quantity*100|number:0}}%
                    ({{vm.resources['children'].balance()|number:2}})
                </div>

            </td>
        </tr>
        <tr ng-repeat="resource in vm.resources" ng-if="resource.name != 'children'"
            ng-class="resource.balance()>0?'success':resource.balance()==0?'info':'danger'">
            <td>
                {{resource.name}}:
            </td>
            <td>{{resource.quantity|number:2}} (<span
                    ng-style="{ color: resource.balance() > 0 ? 'green' :resource.balance()==0?'black': 'red' }">{{resource.balance()|number:2}}</span>)
            </td>
        </tr>
    </table>
</div>
<div class="row">
    <div class="col-md-4" id="population">
        <h3>Population: {{vm.getTotalPopulation()}}</h3>
        <table class="table table-condensed table-bordered table-hover">
            <thead>
            <tr>
                <td>Job</td>
                <td>Quantity</td>
                <td>Food Consumption</td>
                <td>Efficiency</td>
            </tr>
            </thead>
            <tr ng-repeat="item in vm.population">
                <td>{{item.profession.name}}</td>
                <td><span class="label label-pill label-info" style="align:center">{{item.cardinality}}</span></td>
                <td>{{(item.cardinality * item.profession.foodConsumption)|number:1}}</td>
                <td>{{(item.profession.efficiency * item.cardinality)|number:3}}
                    <button class="btn btn-primary" ng-click="vm.upgrade(item.profession)"
                            ng-disabled="!vm.resources[tools]||item.profession.upgradeCost>vm.resources[tools]">Upgrade
                        ({{item.profession.upgradeCost|number:1}} tools)
                    </button>
                </td>
                <td>
                    <div class="btn-group" role="group">
                        <button class="btn btn-primary" ng-click="vm.addWorker(item)"
                                ng-disabled="!(vm.availableWorkers() && item.profession.name!='idle')">+
                        </button>
                        <button class="btn btn-primary" ng-click="vm.removeWorker(item)"
                                ng-disabled="!(item.cardinality>0 && item.profession.name!='idle')">-
                        </button>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div class="col-md-4">
        <h3>Technology:</h3>
        <table class="table table-condensed table-bordered table-hover">
            <tr ng-repeat="item in vm.availableTechs">
                <td>Name: {{item.name}}</td>
                <td>Price: {{item.price}}</td>
                <td>
                    <button class="btn btn-primary" ng-click="vm.research(item)"
                            ng-disabled="item.price>vm.resources['science'].quantity">Research
                    </button>
                </td>
            </tr>
        </table>
    </div>
    <div id="environment" class="col-md-4">
        <h3>Environment:</h3>
        <table class="table table-condensed table-bordered table-hover">
            <tr ng-repeat="item in vm.environment">
                <td>Name: {{item.name}}</td>
                <td>Quantity: {{item.quantity | number:0}}</td>
            </tr>
        </table>
    </div>
</div>